<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="io.virjid.retirement.dao.AccountDao">
	<resultMap type="io.virjid.retirement.entity.AccountEntity"
		id="accountMap">
		<id column="id" property="id" />
		<result column="id_card" property="idCard" />
	</resultMap>

	<select id="queryByAccount" resultMap="accountMap">
	<![CDATA[
	select * 
	from sys_account 
	where account=#{account}
	]]>
	</select>
	
	<select id="isExistByAccount" resultType="boolean">
	<![CDATA[
	select 
	count(account)>0		
	from sys_account
	where account=#{account} and status in (0,1);
	]]>
	</select>
	
	<select id="selectByKey" resultMap="accountMap">
	select *
	from sys_account
	where (status=0 or status=1) 
	<if test="key!=null">
			and (account like #{key} or name like #{key})
	</if>
	and role=#{role} 
	order by account desc
	limit ${(pageNo-1)*pageSize},${pageSize}
	</select>

	<insert id="insert" parameterType="io.virjid.retirement.entity.AccountEntity">
	<![CDATA[
	insert into sys_account 
	(id,account,password,name,birthday,male,address,id_card,contact,role,status) 
	values 
	(#{id},#{account},#{password},#{name},#{birthday},#{male,jdbcType=TINYINT,javaType=Boolean},#{address},#{idCard},#{contact},#{role},#{status});
	]]>
	</insert>
</mapper>